import{d as _e,f as $,s as O,b as w,e as De,g as Ge}from"../chunks/DmJvNfmf.js";import{a2 as Pe,a8 as v,v as ke,a9 as Te,k as c,a6 as d,j as t,a5 as u,a7 as n,t as C,a4 as $e,a3 as Ae,aa as Je,ab as Ke,ac as Ye}from"../chunks/Bawsv930.js";import{i as B}from"../chunks/Cqj5FTWs.js";import{r as K,b as Y,s as oe,l as Ee,e as qe,a as Qe,i as Xe,c as Se,h as Ze,d as et}from"../chunks/BJbFjs1U.js";import{b as tt}from"../chunks/C-NVmxtx.js";import{l as rt,s as at}from"../chunks/2s6byXl0.js";class st{config;constructor(e){this.config={...e,baseUrl:e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`}}getAuthHeaders(){const e=`${this.config.username}:${this.config.password}`;return{Authorization:`Basic ${btoa(e)}`,"User-Agent":"asd-webdav-client/1.0"}}normalizePath(e){return e.endsWith("/")?e:`${e}/`}async uploadFile(e,a){const o=this.normalizePath(this.config.remotePath),s=`${this.config.baseUrl}${o.replace(/^\//,"")}${a}`;try{try{await this.createDirectory(this.config.remotePath)}catch(g){console.warn("目录创建失败，但继续尝试上传:",g)}const l=await fetch(s,{method:"PUT",headers:{...this.getAuthHeaders(),"Content-Type":"application/octet-stream"},body:e});if(l.status===201||l.status===204||l.status===200)return!0;if(l.status===409)try{await this.createDirectory(this.config.remotePath);const g=await fetch(s,{method:"PUT",headers:{...this.getAuthHeaders(),"Content-Type":"application/octet-stream"},body:e});return g.status===201||g.status===204||g.status===200}catch(g){throw new Error(`上传失败: 目录冲突且无法创建 - ${g instanceof Error?g.message:"未知错误"}`)}else{const g=await l.text();throw new Error(`上传失败: HTTP ${l.status} - ${g}`)}}catch(l){throw console.error("上传失败:",l),l}}async createDirectory(e){if(!e||e==="/")return!0;const a=this.normalizePath(e),o=`${this.config.baseUrl}${a.replace(/^\//,"")}`;try{const s=await fetch(o,{method:"MKCOL",headers:this.getAuthHeaders()});if(s.status===201||s.status===204||s.status===405)return!0;if(s.status===409){const l=e.substring(0,e.lastIndexOf("/"));if(l&&l!==e&&l!=="")return await this.createDirectory(l),await this.createDirectory(e);throw new Error("无法创建目录，父目录不存在")}else if(s.status===404){const l=e.substring(0,e.lastIndexOf("/"));if(l&&l!==e&&l!=="")return await this.createDirectory(l),await this.createDirectory(e);throw new Error("目录路径不存在")}else{const l=await s.text();throw new Error(`创建目录失败: HTTP ${s.status} - ${l}`)}}catch(s){throw console.error("创建目录失败:",s),s}}async downloadFile(e){const a=this.normalizePath(this.config.remotePath),o=`${this.config.baseUrl}${a.replace(/^\//,"")}${e}`;try{const s=await fetch(o,{method:"GET",headers:this.getAuthHeaders()});if(s.status===200)return await s.blob();throw s.status===404?new Error("文件不存在"):new Error(`下载失败: HTTP ${s.status}`)}catch(s){throw console.error("下载失败:",s),s}}async listFiles(){const e=this.normalizePath(this.config.remotePath),a=`${this.config.baseUrl}${e.replace(/^\//,"")}`;try{const o=await fetch(a,{method:"PROPFIND",headers:{...this.getAuthHeaders(),Depth:"1","Content-Type":"application/xml"},body:`<?xml version="1.0" encoding="utf-8"?>
<propfind xmlns="DAV:">
  <allprop/>
</propfind>`});if(o.status===207){const s=await o.text();return this.parsePropFindResponse(s)}else{if(o.status===404)return[];if(o.status===200){const s=await o.text();try{return this.parsePropFindResponse(s)}catch{return[]}}else{const s=await o.text();throw new Error(`列出文件失败: HTTP ${o.status} - ${s}`)}}}catch(o){throw console.error("列出文件失败:",o),o}}async fileExists(e){const a=this.normalizePath(this.config.remotePath),o=`${this.config.baseUrl}${a.replace(/^\//,"")}${e}`;try{return(await fetch(o,{method:"HEAD",headers:this.getAuthHeaders()})).status===200}catch{return!1}}parsePropFindResponse(e){const a=[];try{const s=new DOMParser().parseFromString(e,"text/xml");let l;s.getElementsByTagName("d:response").length>0?l=s.getElementsByTagName("d:response"):s.getElementsByTagName("D:response").length>0?l=s.getElementsByTagName("D:response"):s.getElementsByTagNameNS("DAV:","response").length>0?l=s.getElementsByTagNameNS("DAV:","response"):l=s.getElementsByTagName("response");for(let g=0;g<l.length;g++){const _=l[g];let D=null;const U=["d:href","D:href","href"];for(const x of U){const h=_.getElementsByTagName(x);if(h.length>0){D=h[0];break}}if(D){const x=D.textContent||"",h=x.includes("/")?x.substring(x.lastIndexOf("/")+1):x;if(h&&h.startsWith("backup-")&&h.endsWith(".json")){let A=0,p="";const m=["d:propstat","D:propstat","propstat"];for(const H of m){const R=_.getElementsByTagName(H);if(R.length>0){const S=R[0],q=["d:getcontentlength","D:getcontentlength","getcontentlength"];for(const y of q){const k=S.getElementsByTagName(y);if(k.length>0){A=parseInt(k[0].textContent||"0");break}}const f=["d:getlastmodified","D:getlastmodified","getlastmodified"];for(const y of f){const k=S.getElementsByTagName(y);if(k.length>0){p=k[0].textContent||"";break}}break}}a.push({name:h,size:A,lastModified:p})}}}}catch(o){console.error("解析 WebDAV 响应失败:",o)}return a}async testConnection(){try{const e=await fetch(this.config.baseUrl,{method:"OPTIONS",headers:this.getAuthHeaders()});if(e.status===200||e.status===204||e.status===405)return!0;const a=await fetch(this.config.baseUrl,{method:"PROPFIND",headers:{...this.getAuthHeaders(),Depth:"0","Content-Type":"application/xml"},body:`<?xml version="1.0" encoding="utf-8"?>
<propfind xmlns="DAV:">
  <allprop/>
</propfind>`});return a.status===207||a.status===200}catch(e){return console.error("连接测试失败:",e),!1}}}const ot="1.0",Ne="webdav-backup-settings";function nt(){return`backup-${new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5)}.json`}async function it(b){const e=rt(),a={settings:b,presets:e,timestamp:new Date().toISOString(),version:ot};return JSON.stringify(a,null,2)}function dt(b){const e=JSON.parse(b);if(!e.settings||!e.timestamp||!e.version)throw new Error("无效的备份数据格式");return(!e.presets||!Array.isArray(e.presets))&&(e.presets=[]),e}function lt(){if(typeof window>"u")return we();try{const b=localStorage.getItem(Ne);if(b)return JSON.parse(b)}catch(b){console.error("加载 WebDAV 设置失败:",b)}return we()}function ct(b){if(!(typeof window>"u"))try{localStorage.setItem(Ne,JSON.stringify(b))}catch(e){console.error("保存 WebDAV 设置失败:",e)}}function we(){return{url:"",username:"",password:"",remotePath:"/backups"}}function he(b){const e={baseUrl:b.url,username:b.username,password:b.password,remotePath:b.remotePath};return new st(e)}async function ut(b,e){if(!e.url||!e.username||!e.password)throw new Error("WebDAV 配置不完整");const a=he(e);if(!await a.testConnection())throw new Error("无法连接到 WebDAV 服务器");await a.createDirectory(e.remotePath);const s=await it(b),l=nt(),g=new Blob([s],{type:"application/json"}),_=new File([g],l,{type:"application/json"});if(!await a.uploadFile(_,l))throw new Error("备份上传失败")}async function bt(b,e){if(!e.url||!e.username||!e.password)throw new Error("WebDAV 配置不完整");const s=await(await he(e).downloadFile(b)).text();return dt(s)}async function gt(b){if(!b.url||!b.username||!b.password)throw new Error("WebDAV 配置不完整");return await he(b).listFiles()}var pt=$("<div> </div>"),mt=$('<div class="p-4 bg-gray-100 dark:bg-gray-800 rounded-md border border-gray-300 dark:border-gray-600"><div class="flex items-center justify-between mb-2"><h3 class="text-sm font-medium text-gray-900 dark:text-white">调试信息</h3> <button type="button" aria-label="关闭调试信息" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <pre class="text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap"> </pre></div>'),ft=$('<span class="text-green-600 dark:text-green-400 text-sm font-medium">✓ 已连接</span>'),ht=$('<div class="flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg gap-3"><div class="flex-1 min-w-0"><div class="font-medium text-gray-900 dark:text-white truncate"> </div> <div class="text-sm text-gray-500 dark:text-gray-400"> </div></div> <button type="button" class="flex-shrink-0 px-4 py-2 bg-orange-600 hover:bg-orange-700 dark:bg-orange-500 dark:hover:bg-orange-600 disabled:bg-gray-400 text-white text-sm font-medium rounded-md transition-colors"> </button></div>'),vt=$('<div class="space-y-3"><h3 class="text-lg font-medium text-gray-900 dark:text-white">可用备份</h3> <div class="space-y-2"></div></div>'),xt=$('<div class="text-gray-500 dark:text-gray-400 text-center py-8">暂无备份文件</div>'),yt=$('<div class="bg-white dark:bg-gray-900 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 p-6"><h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-6">备份操作</h2> <div class="flex items-center space-x-4 mb-6"><button type="button" class="px-6 py-2.5 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white font-medium rounded-md transition-colors"> </button> <button type="button" class="px-6 py-2.5 bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 disabled:bg-gray-400 text-white font-medium rounded-md transition-colors"> </button></div> <!></div>'),kt=$('<div class="space-y-8"><!> <!> <div class="bg-white dark:bg-gray-900 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 p-6"><div class="flex items-center justify-between mb-6"><h2 class="text-xl font-semibold text-gray-900 dark:text-white">WebDAV 配置</h2> <button type="button" class="px-3 py-1 text-xs font-medium text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md transition-colors"> </button></div> <div class="space-y-4"><div><label for="webdavUrl" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">WebDAV 服务器地址</label> <input id="webdavUrl" type="url" placeholder="https://example.com/webdav" class="w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"/></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="webdavUsername" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">用户名</label> <input id="webdavUsername" type="text" placeholder="username" class="w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"/></div> <div><label for="webdavPassword" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">密码</label> <input id="webdavPassword" type="password" placeholder="password" class="w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"/></div></div> <div><label for="remotePath" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">远程路径</label> <input id="remotePath" type="text" placeholder="/backups" class="w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"/></div> <div class="flex items-center space-x-4"><button type="button" class="px-6 py-2.5 bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 disabled:bg-gray-400 text-white font-medium rounded-md transition-colors"> </button> <button type="button" class="px-6 py-2.5 bg-gray-600 hover:bg-gray-700 text-white font-medium rounded-md transition-colors">保存配置</button> <!></div></div></div> <!></div>');function wt(b,e){Pe(e,!0);let a=v(ke({url:"",username:"",password:"",remotePath:"/backups"})),o=v(!1),s=v(!1),l=v(!1),g=v(!1),_=v(!1),D=v(""),U=v("info"),x=v(ke([])),h=v(!1),A=v("");Te(()=>{c(a,lt(),!0)});function p(r,i="info"){c(D,r,!0),c(U,i,!0),setTimeout(()=>{c(D,"")},5e3)}function m(r){const i=new Date().toLocaleTimeString();c(A,`[${i}] ${r}
${t(A)}`)}async function H(){if(!t(a).url||!t(a).username||!t(a).password){p("请填写完整的 WebDAV 配置信息","error");return}c(s,!0),m(`开始连接测试: ${t(a).url}`);try{m("发送 PROPFIND 请求...");const r=await fetch(t(a).url,{method:"PROPFIND",headers:{Authorization:`Basic ${btoa(`${t(a).username}:${t(a).password}`)}`,Depth:"0","Content-Type":"application/xml"},body:`<?xml version="1.0" encoding="utf-8"?>
<propfind xmlns="DAV:">
  <allprop/>
</propfind>`});if(m(`响应状态: ${r.status} ${r.statusText}`),console.log("WebDAV 连接测试响应:",r.status,r.statusText),r.status===207)c(o,!0),m("连接成功 (Multi-Status)"),p("连接成功！","success"),await S();else if(r.status===200)c(o,!0),m("连接成功 (OK)"),p("连接成功！（服务器返回状态码200）","success"),await S();else if(r.status===401)c(o,!1),m("认证失败"),p("认证失败，请检查用户名和密码","error");else if(r.status===404)c(o,!1),m("服务器地址不存在"),p("服务器地址不存在，请检查 URL","error");else if(r.status===405){m("PROPFIND 不被支持，尝试 OPTIONS...");try{const i=await fetch(t(a).url,{method:"OPTIONS",headers:{Authorization:`Basic ${btoa(`${t(a).username}:${t(a).password}`)}`}});m(`OPTIONS 响应: ${i.status} ${i.statusText}`),i.status===200||i.status===204?(c(o,!0),m("连接成功 (通过 OPTIONS)"),p("连接成功！（服务器不支持 PROPFIND，但支持 OPTIONS）","success")):(c(o,!1),m("服务器不支持 WebDAV 协议"),p("服务器不支持 WebDAV 协议","error"))}catch(i){m(`OPTIONS 请求失败: ${i instanceof Error?i.message:"未知错误"}`),c(o,!1),p("服务器不支持 WebDAV 协议","error")}}else{c(o,!1);const i=await r.text();m(`连接失败: ${r.status} - ${i}`),console.error("WebDAV 错误响应:",i),p(`连接失败: HTTP ${r.status} - ${r.statusText}`,"error")}}catch(r){c(o,!1),m(`连接异常: ${r instanceof Error?r.message:"网络错误"}`),console.error("WebDAV 连接错误:",r),p(`连接失败: ${r instanceof Error?r.message:"网络错误"}`,"error")}finally{c(s,!1)}}async function R(){ct(t(a)),p("WebDAV 配置已保存","success")}async function S(){if(!t(o)){p("请先测试连接","error");return}c(_,!0);try{const r=await gt(t(a));c(x,r.filter(i=>i.name.startsWith("backup-")&&i.name.endsWith(".json")),!0)}catch{p("获取备份列表失败","error")}finally{c(_,!1)}}async function q(){if(!t(o)){p("请先测试连接","error");return}c(l,!0);try{const r=Ee();await ut(r,t(a)),p("备份创建成功！","success"),await S()}catch(r){p(`备份失败: ${r instanceof Error?r.message:"未知错误"}`,"error")}finally{c(l,!1)}}async function f(r){if(!t(o)){p("请先测试连接","error");return}if(confirm("恢复备份将覆盖当前设置和预设仓库，确定要继续吗？")){c(g,!0);try{const i=await bt(r,t(a));Se(i.settings),at(i.presets),p("备份恢复成功！页面将在3秒后刷新","success"),setTimeout(()=>{window.location.href=`${tt}`},3e3)}catch(i){p(`恢复失败: ${i instanceof Error?i.message:"未知错误"}`,"error")}finally{c(g,!1)}}}function y(r){if(r===0)return"0 B";const i=1024,T=["B","KB","MB"],E=Math.floor(Math.log(r)/Math.log(i));return parseFloat((r/Math.pow(i,E)).toFixed(1))+" "+T[E]}function k(r){if(!r)return"未知";try{return new Date(r).toLocaleString("zh-CN")}catch{return"未知"}}var N=kt(),V=d(N);{var Q=r=>{var i=pt(),T=d(i,!0);n(i),C(()=>{oe(i,1,`p-4 rounded-md ${t(U)==="success"?"bg-green-50 text-green-800 border border-green-200":t(U)==="error"?"bg-red-50 text-red-800 border border-red-200":"bg-blue-50 text-blue-800 border border-blue-200"}`),O(T,t(D))}),w(r,i)};B(V,r=>{t(D)&&r(Q)})}var X=u(V,2);{var Z=r=>{var i=mt(),T=d(i),E=u(d(T),2);E.__click=()=>c(h,!1),n(T);var ue=u(T,2),L=d(ue,!0);n(ue),n(i),C(()=>O(L,t(A)||"暂无调试信息")),w(r,i)};B(X,r=>{t(h)&&r(Z)})}var I=u(X,2),z=d(I),ee=u(d(z),2);ee.__click=()=>c(h,!t(h));var ne=d(ee,!0);n(ee),n(z);var te=u(z,2),M=d(te),ie=u(d(M),2);K(ie),n(M);var F=u(M,2),j=d(F),re=u(d(j),2);K(re),n(j);var de=u(j,2),le=u(d(de),2);K(le),n(de),n(F);var P=u(F,2),ce=u(d(P),2);K(ce),n(P);var ve=u(P,2),ae=d(ve);ae.__click=H;var Ve=d(ae,!0);n(ae);var xe=u(ae,2);xe.__click=R;var We=u(xe,2);{var Oe=r=>{var i=ft();w(r,i)};B(We,r=>{t(o)&&r(Oe)})}n(ve),n(te),n(I);var Be=u(I,2);{var Ue=r=>{var i=yt(),T=u(d(i),2),E=d(T);E.__click=q;var ue=d(E,!0);n(E);var L=u(E,2);L.__click=S;var Ie=d(L,!0);n(L),n(T);var ze=u(T,2);{var Fe=G=>{var J=vt(),be=u(d(J),2);qe(be,21,()=>t(x),Xe,(me,W)=>{var se=ht(),fe=d(se),ge=d(fe),He=d(ge,!0);n(ge);var ye=u(ge,2),Re=d(ye);n(ye),n(fe);var pe=u(fe,2);pe.__click=()=>f(t(W).name);var Me=d(pe,!0);n(pe),n(se),C((je,Le)=>{Qe(ge,"title",t(W).name),O(He,t(W).name),O(Re,`${je??""} • ${Le??""}`),pe.disabled=t(g),O(Me,t(g)?"恢复中...":"恢复")},[()=>y(t(W).size),()=>k(t(W).lastModified)]),w(me,se)}),n(be),n(J),w(G,J)},Ce=G=>{var J=De(),be=Ae(J);{var me=W=>{var se=xt();w(W,se)};B(be,W=>{t(x).length===0&&W(me)},!0)}w(G,J)};B(ze,G=>{t(x).length>0?G(Fe):G(Ce,!1)})}n(i),C(()=>{E.disabled=t(l),O(ue,t(l)?"备份中...":"创建备份"),L.disabled=t(_),O(Ie,t(_)?"加载中...":"刷新列表")}),w(r,i)};B(Be,r=>{t(o)&&r(Ue)})}n(N),C(()=>{O(ne,t(h)?"关闭调试":"开启调试"),ae.disabled=t(s),O(Ve,t(s)?"连接中...":"测试连接")}),Y(ie,()=>t(a).url,r=>t(a).url=r),Y(re,()=>t(a).username,r=>t(a).username=r),Y(le,()=>t(a).password,r=>t(a).password=r),Y(ce,()=>t(a).remotePath,r=>t(a).remotePath=r),w(b,N),$e()}_e(["click"]);var _t=$('<span class="text-green-600 dark:text-green-400 text-sm font-medium">设置已保存！</span>'),Dt=$('<div class="bg-white dark:bg-gray-900 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 p-6 md:p-8 mb-6"><form class="space-y-6"><fieldset><legend class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">主题颜色</legend> <div class="flex gap-3"><button type="button"><div class="w-6 h-6 rounded-full bg-blue-500"></div> <span class="font-medium text-gray-900 dark:text-white">蓝色</span></button> <button type="button"><div class="w-6 h-6 rounded-full bg-pink-500"></div> <span class="font-medium text-gray-900 dark:text-white">粉色</span></button></div></fieldset> <div><label for="mirrorUrl" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">下载镜像源</label> <input id="mirrorUrl" type="url" placeholder="https://gh-proxy.com" class="w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"/> <div class="mt-3"><button type="button" class="px-4 py-1.5 text-xs font-medium text-blue-700 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-900/50 rounded-md transition-colors">使用默认镜像源</button></div> <div class="mt-5 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"><h3 class="text-sm font-medium text-gray-900 dark:text-white mb-3">其他镜像源</h3> <div class="space-y-2 text-sm"><div class="flex items-center justify-between"><span class="font-mono text-gray-700 dark:text-gray-300">https://gh.xmly.dev</span> <button type="button" class="text-blue-600 dark:text-blue-400 hover:underline text-xs px-2 py-1 rounded hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors">使用</button></div></div></div></div> <div><label for="accessToken" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">GitHub访问令牌</label> <input id="accessToken" type="password" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx" class="w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"/> <div class="mt-3"><a href="https://github.com/settings/tokens" target="_blank" rel="noopener noreferrer" class="text-xs text-blue-600 dark:text-blue-400 hover:underline">生成 Personal Access Token (classic)</a></div></div> <div class="flex items-center space-x-4"><button type="submit" class="px-6 py-2.5 bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white font-medium rounded-md transition-colors">保存设置</button> <!></div></form></div>'),Pt=$('<div class="min-h-screen bg-gray-50 dark:bg-gray-900 py-10 md:py-12"><div class="max-w-3xl mx-auto px-4 sm:px-8 lg:px-10"><div class="mb-10"><h1 class="text-3xl font-bold text-gray-900 dark:text-white">设置</h1> <p class="mt-3 text-gray-600 dark:text-gray-400 text-lg">自定义 GitHub Release 下载工具的配置</p></div> <div class="mb-6 border-b border-gray-200 dark:border-gray-700"><nav class="flex space-x-8"><button type="button">常规设置</button> <button type="button">备份恢复</button></nav></div> <!></div></div>');function Vt(b,e){Pe(e,!0);let a=v(""),o=v("blue"),s=v(""),l=v(!1),g=v("general");Te(()=>{const f=Ee();c(a,f.mirrorUrl||"",!0),c(o,f.theme||"blue",!0),c(s,f.accessToken||"",!0),new URLSearchParams(window.location.search).get("tab")==="backup"&&c(g,"backup")});function _(f){f.preventDefault();const y=t(a).trim(),k=t(s).trim();Se({mirrorUrl:y||null,theme:t(o),accessToken:k||null}),c(l,!0),setTimeout(()=>{c(l,!1)},2e3)}function D(){c(a,"https://gh-proxy.com")}function U(f){c(o,f,!0),et(f)}var x=Pt();Ze("1i19ct2",f=>{Je(()=>{Ke.title="设置 - GitHub Release 下载工具"})});var h=d(x),A=u(d(h),2),p=d(A),m=d(p);m.__click=()=>c(g,"general");var H=u(m,2);H.__click=()=>c(g,"backup"),n(p),n(A);var R=u(A,2);{var S=f=>{var y=Dt(),k=d(y),N=d(k),V=u(d(N),2),Q=d(V);Q.__click=()=>U("blue");var X=u(Q,2);X.__click=()=>U("pink"),n(V),n(N);var Z=u(N,2),I=u(d(Z),2);K(I);var z=u(I,2),ee=d(z);ee.__click=D,n(z);var ne=u(z,2),te=u(d(ne),2),M=d(te),ie=u(d(M),2);ie.__click=()=>c(a,"https://gh.xmly.dev"),n(M),n(te),n(ne),n(Z);var F=u(Z,2),j=u(d(F),2);K(j),Ye(2),n(F);var re=u(F,2),de=u(d(re),2);{var le=P=>{var ce=_t();w(P,ce)};B(de,P=>{t(l)&&P(le)})}n(re),n(k),n(y),C(()=>{oe(Q,1,`flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-md transition-colors flex items-center justify-center gap-2 ${t(o)==="blue"?"bg-blue-100 dark:bg-blue-900/30 border-blue-300 dark:border-blue-700":"bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700"}`),oe(X,1,`flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-md transition-colors flex items-center justify-center gap-2 ${t(o)==="pink"?"bg-pink-100 dark:bg-pink-900/30 border-pink-300 dark:border-pink-700":"bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700"}`)}),Ge("submit",k,_),Y(I,()=>t(a),P=>c(a,P)),Y(j,()=>t(s),P=>c(s,P)),w(f,y)},q=f=>{var y=De(),k=Ae(y);{var N=V=>{wt(V,{})};B(k,V=>{t(g)==="backup"&&V(N)},!0)}w(f,y)};B(R,f=>{t(g)==="general"?f(S):f(q,!1)})}n(h),n(x),C(()=>{oe(m,1,`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${t(g)==="general"?t(o)==="pink"?"border-pink-500 text-pink-600 dark:text-pink-400":"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`),oe(H,1,`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${t(g)==="backup"?t(o)==="pink"?"border-pink-500 text-pink-600 dark:text-pink-400":"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`)}),w(b,x),$e()}_e(["click"]);export{Vt as component};
